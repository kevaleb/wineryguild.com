---
layout: default
pageclass: wineries
---
<link rel="stylesheet" href="/css/flickity.css" media="screen">
<script src="/scripts/flickity.js"></script>
<div class="main-gallery full gallery js-flickity">
	{% for item in page.gallery %}
		<div class="gallery-cell" style="background-image: url('{{ item.image_path }}');">
			<!--<img src="{{  item.Image_Path  }}" alt="{{  page.title  }}" data-adaptive-backgroun />-->
			{% if forloop.first %}
				<hgroup>
					<div class="logo" style="background-image: url({{ page.logo_path }});">
						<!--<img src="{{ page.logo_path }}" alt="{{ page.wineryname }}" />-->
					</div>
					<h1>{{ page.wineryname }}</h1>
					{% if page.videocontrols == true %}<span class="button" id="open-overlay">Watch Video &#9656;</span>{% endif %}
					<!--<div class="video-controls" id="open-overlay">
						<div class="video-play">
							<span class="video-button-icon">&#9656;</span>
							<span class="video-button-outline"></span>
							<span class="video-cta">Watch Video</span>
						</div>
					</div>-->
				</hgroup>
			{% endif %}
		</div>
	{% endfor %}
</div>



{% if page.videocontrols == true %}
<div class="overlay">
	<span class="close-overlay" id="close-overlay">X</span>
	<div class="video-wrapper">
		<iframe id="video" width="560" height="315" src="{{ page.videolink }}?enablejsapi=1" frameborder="0" allowfullscreen></iframe>
	</div>
</div>
{% endif %}



<div class="general-winery-info">
	<span>
		<img src="/images/icons/communication/phone.png" alt="{{ page.wineryname }} phone number" />
		{{ page.phone }}
	</span>
	<span>
		<img src="/images/icons/communication/email.png" alt="{{ page.wineryname }} email" />
		{{ page.email }}
	</span>
	<span>
		<img src="/images/icons/communication/internet.png" alt="{{ page.wineryname }} website" />
		<a href="http://www.{{ page.website }}">{{ page.website }}</a>
	</span>
</div>


<div class="wine-list">
	<ul>		
	{% for wine in site.wines %}
	{% if wine.wineryname == page.wineryname %}
		<li>
			<a href="{{ wine.url }}">
				<img src="{{ wine.image_path }}" alt="" />
				<hgroup>
					<h2 data-ava="{{ wine.ava }}">{{ wine.winename }}</h2>
				</hgroup>
			</a>
		</li>
	{% endif %}
	{% endfor %}
	</ul>
</div>

<article>
	{{ content }}
</article>


<!--<div class="winery-address">
	<h3><!--<img src="/images/icons/communication/gps.png" alt="{{ page.wineryname }} address" />--*> {{ page.address }}</h3>
</div>-->
<div id='winery-map'></div>


<script>
//	$('.main-gallery').flickity({
//	  // options
//	  cellAlign: 'left',
//	  wrapAround: true,
//	  lazyLoad: 1,
//	  contain: true
//	});
//	
	
	// https://developers.google.com/youtube/iframe_api_reference
	
	// global variable for the player
	var player;
	
	// this function gets called when API is ready to use
	function onYouTubePlayerAPIReady() {
	  // create the global player from the specific iframe (#video)
	  player = new YT.Player('video', {
	    events: {
	      // call this function when player is ready to use
	      'onReady': onPlayerReady
	    }
	  });
	}
	
	function onPlayerReady(event) {
	  
	  // bind events
	  var playButton = document.getElementById("open-overlay");
	  playButton.addEventListener("click", function() {
	    player.playVideo();
	  });
	  
	  var pauseButton = document.getElementById("close-overlay");
	  pauseButton.addEventListener("click", function() {
	    player.pauseVideo();
	  });
	  
	}
	
	// Inject YouTube API script
	var tag = document.createElement('script');
	tag.src = "//www.youtube.com/player_api";
	var firstScriptTag = document.getElementsByTagName('script')[0];
	firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script>


<script src='https://maps.googleapis.com/maps/api/js?key=&sensor=false&extension=.js'></script> 
 
<script> 
    google.maps.event.addDomListener(window, 'load', init);
    var map;
    function init() {
        var mapOptions = {
            center: new google.maps.LatLng({{ page.lat }}, {{ page.lng }}),
            zoom: {{ page.mapzoom }},
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.DEFAULT,
            },
            disableDoubleClickZoom: true,
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            },
            scaleControl: true,
            scrollwheel: false,
            panControl: true,
            streetViewControl: true,
            draggable : true,
            overviewMapControl: true,
            overviewMapControlOptions: {
                opened: false,
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP,
        }
        var mapElement = document.getElementById('winery-map');
        var map = new google.maps.Map(mapElement, mapOptions);
        var locations = [
			['{{ page.wineryname }}', '{{ page.address }}','undefined', 'undefined', 'undefined', {{ page.lat }}, {{ page.lng }}, '/images/icons/gps/gps.png']
        ];
        for (i = 0; i < locations.length; i++) {
			if (locations[i][1] =='undefined'){ description ='';} else { description = locations[i][1];}
			if (locations[i][2] =='undefined'){ telephone ='';} else { telephone = locations[i][2];}
			if (locations[i][3] =='undefined'){ email ='';} else { email = locations[i][3];}
           if (locations[i][4] =='undefined'){ web ='';} else { web = locations[i][4];}
           if (locations[i][7] =='undefined'){ markericon ='';} else { markericon = locations[i][7];}
            marker = new google.maps.Marker({
                icon: markericon,
                position: new google.maps.LatLng(locations[i][5], locations[i][6]),
                map: map,
                title: locations[i][0],
                desc: description,
                tel: telephone,
                email: email,
                web: web
            });
link = '';     }

}
</script>



